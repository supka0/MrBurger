Basket = []
list_menu = ["Гамбургер", "Чизбургер", "Картофель фри", "Кока-кола", "Шейк"]
prise_menu = [150, 150, 80, 100, 250]
burger_ingredients = [["Котлета", 40], ["Сыр", 30], ["Салат", 10], ["Соус", 20], ["Помидор", 15]]
cheeseburger_ingredients = [["Котлета", 40], ["Сыр", 90], ["Салат", 10], ["Соус", 20]]
shake_ingredients = [["Молоко", 10], ["Сироп", 15], ["Шоколад", 20], ["Орехи", 25]]
sizes = {"Маленький": -20, "Средний": 0, "Большой": 20}
shake_flavors = ["Классический", "Шоколадный", "Ванильный"]

def total_price():
    total_price = 0
    for item in Basket:
        if isinstance(item, tuple):
            item_name, *customizations = item
            if item_name == "Гамбургер":
                total_price += prise_menu[list_menu.index(item_name)]
                if customizations:
                    for ingredient in customizations[0]:
                        total_price += ingredient[1]
            elif item_name == "Чизбургер":
                total_price += prise_menu[list_menu.index(item_name)]
                if customizations:
                    for ingredient in customizations[0]:
                        total_price += ingredient[1]
            elif item_name == "Шейк":
                total_price += prise_menu[list_menu.index("Шейк")]
                if customizations:
                    for ingredient in customizations[1]:
                        total_price += ingredient[1]
            else:
                index = list_menu.index(item_name)
                total_price += prise_menu[index]
                if customizations:
                    total_price += customizations[2]
        else:
            index = list_menu.index(item)
            total_price += Basket.count(item) * prise_menu[index]
    return total_price

def menu():
    menu_options = ("\n 1 - Перейти к меню "
                    "\n 2 - Оплата"
                    "\n 3 - Корзина"
                    "\n 4 - Выход")
    return menu_options

def customize_item(item_name):
    selected_ingredients = []
    if item_name == "Гамбургер":
        ingredients_list = burger_ingredients
    elif item_name == "Чизбургер":
        ingredients_list = cheeseburger_ingredients
    elif item_name == "Шейк":
        ingredients_list = shake_ingredients
        selected_flavor = input("Выберите вкус шейка (Классический, Шоколадный, Ванильный): ")
        if selected_flavor not in shake_flavors:
            print("Неверный вкус шейка.")
            return

    for i, ingredient in enumerate(ingredients_list):
        print(f"{i+1} - {ingredient[0]} ({ingredient[1]} руб.)")
    ingredient_indices = input("Введите номера ингредиентов через запятую: ").split(",")
    for index_str in ingredient_indices:
        index = int(index_str.strip())
        if 1 <= index <= len(ingredients_list):
            selected_ingredients.append(ingredients_list[index - 1])

    if item_name == "Шейк":
        Basket.append((item_name, selected_flavor, selected_ingredients))
    else:
        Basket.append((item_name, selected_ingredients))

def customize_fries_soda(item_name):
    for i, size in enumerate(sizes):
        print(f"{i+1} - {size} ({sizes[size]} руб.)")
    size_choice = int(input("Введите номер размера: "))
    if 1 <= size_choice <= len(sizes):
        size_name = list(sizes.keys())[size_choice - 1]
        size_price = sizes[size_name]
        Basket.append((item_name, size_name, size_price))

def go_to_order():
    menu_items = ("\n 1 - Гамбургер"
                  "\n 2 - Чизбургер"
                  "\n 3 - Картофель фри"
                  "\n 4 - Кока-кола"
                  "\n 5 - Шейк")
    print(menu_items)
    order = int(input("Введите цифру товара который желаете заказать: "))

    if order == 1:
        customize_item("Гамбургер")
    elif order == 2:
        customize_item("Чизбургер")
    elif order == 3:
        customize_fries_soda("Картофель фри")
    elif order == 4:
        customize_fries_soda("Кока-кола")
    elif order == 5:
        customize_item("Шейк")

def payment():
    total_price_value = total_price()
    print("Вы купили товаров на сумму: ", total_price_value)
    print('\n Введите способ оплаты:\n 1 - по карте \n 2 - наличными ')
    payment_method = int(input())
    if payment_method == 2:
        cash_payment = int(input("Введите сумму оплаты наличными: "))
        if cash_payment > total_price_value:
            print("Вот ваша сдача:", cash_payment - total_price_value)
            print("Спасибо за покупку")
        elif cash_payment == total_price_value:
            print("Спасибо за покупку")
        else:
            print("Вы дали недостаточную сумму для оплаты заказа")
    elif payment_method == 1:
        print("Спасибо за покупку")
    else:
        print("Некорректный ввод способа оплаты")

def cart():
    total_price_value = total_price()
    addon_price = 0
    for item in Basket:
        if isinstance(item, tuple):
            item_name, *customizations = item
            print(f"{item_name}:", end=" ")
            if customizations:
                if item_name == "Шейк":
                    print(f"Вкус: {customizations[0]}", end=" ")
                    print("Ингредиенты:", end=" ")
                    for ingredient in customizations[1]:
                        print(f"{ingredient[0]} ({ingredient[1]} руб.)", end=", ")
                        addon_price += ingredient[1]
                else:
                    print("Ингредиенты:", end=" ")
                    for ingredient in customizations[0]:
                        print(f"{ingredient[0]} ({ingredient[1]} руб.)", end=", ")
                        addon_price += ingredient[1]
            print()
        else:
            print(f"{item}: {Basket.count(item)} - {Basket.count(item) * prise_menu[list_menu.index(item)]}")
    print(f"Итоговая сумма заказа: {total_price_value}")
    if addon_price != 0:
        print(f"Стоимость добавленных ингредиентов: {addon_price}")

while True:
    print(menu())
    Action_selection = int(input("Введите номер желаемого действия: "))

    if Action_selection == 1:
        go_to_order()
    elif Action_selection == 2:
        payment()
    elif Action_selection == 3:
        cart()
    elif Action_selection == 4:
        print("Спасибо за заказ!")
        break
    else:
        print("Некорректный ввод")
